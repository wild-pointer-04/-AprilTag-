# å¦‚ä½•è¿è¡Œé²æ£’AprilTagç³»ç»Ÿ

## ğŸš€ ä¸€é”®å¯åŠ¨

æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
python start.py
```

è¿™ä¼šæ˜¾ç¤ºä¸€ä¸ªèœå•ï¼Œè®©ä½ é€‰æ‹©ä¸åŒçš„è¿è¡Œæ¨¡å¼ã€‚

## ğŸ“‹ è¿è¡Œé€‰é¡¹

### 1. å…¨é¢AprilTagå®¶æ—æµ‹è¯•
```bash
python comprehensive_apriltag_test.py --image data/board1.png
```
- æµ‹è¯•æ‰€æœ‰AprilTagå®¶æ—ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ç±»å‹
- æ¨èåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¿è¡Œ

### 2. é²æ£’AprilTagç³»ç»Ÿ (è§£å†³247pxè¯¯å·®)
```bash
python run_robust_apriltag_system.py --data-dir data
```
- å¤„ç†æ•´ä¸ªdataç›®å½•ä¸­çš„æ‰€æœ‰å›¾åƒ
- è‡ªåŠ¨è§£å†³PnPå¤šè§£æ­§ä¹‰é—®é¢˜
- ç”Ÿæˆè¯¦ç»†çš„ç»Ÿè®¡æŠ¥å‘Š

### 3. å¤„ç†å•å¼ å›¾åƒ
```bash
python run_robust_apriltag_system.py --image data/board1.png
```

### 4. è‡ªå®šä¹‰å‚æ•°
```bash
python run_robust_apriltag_system.py \
    --data-dir data \
    --tag-family tagStandard41h12 \
    --max-error 10.0 \
    --grid-rows 4 \
    --grid-cols 11
```

## ğŸ“Š æŸ¥çœ‹ç»“æœ

è¿è¡Œåï¼Œç»“æœä¼šä¿å­˜åœ¨ï¼š
- `outputs/robust_apriltag_results/` - å¯è§†åŒ–å›¾åƒ
- `outputs/robust_apriltag_results/detailed_results.csv` - è¯¦ç»†æ•°æ®

## ğŸ”§ å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--data-dir` | `data` | å›¾åƒæ•°æ®ç›®å½• |
| `--tag-family` | `tagStandard41h12` | AprilTagå®¶æ— |
| `--tag-size` | `20.0` | AprilTagå°ºå¯¸(mm) |
| `--max-error` | `10.0` | æœ€å¤§å…è®¸é‡æŠ•å½±è¯¯å·®(px) |
| `--grid-rows` | `4` | æ ‡å®šæ¿ç½‘æ ¼è¡Œæ•° |
| `--grid-cols` | `11` | æ ‡å®šæ¿ç½‘æ ¼åˆ—æ•° |

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä½¿ç”¨é²æ£’ç³»ç»Ÿåï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

```
âœ… ä½å§¿ä¼°è®¡æˆåŠŸ!
  é‡æŠ•å½±è¯¯å·®: 3.245px        # ä»247pxé™åˆ°<10px
  ä½¿ç”¨æ–¹æ³•: APRILTAG_GUESS   # ä½¿ç”¨AprilTagçº¦æŸ
  AprilTagä¸€è‡´æ€§: âœ…          # å‡ ä½•ä¸€è‡´æ€§æ£€æŸ¥é€šè¿‡
  ç›¸æœºå€¾æ–œè§’åº¦:
    Roll:  +12.34Â°
    Pitch: +5.67Â°
    Yaw:   -2.89Â°
```

## ğŸ› æ•…éšœæ’é™¤

### å¦‚æœå‡ºç°å¯¼å…¥é”™è¯¯
```bash
pip install opencv-python numpy pupil-apriltags
```

### å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°AprilTag
1. è¿è¡ŒAprilTagå®¶æ—æµ‹è¯•æ‰¾åˆ°æ­£ç¡®çš„å®¶æ—
2. æ£€æŸ¥AprilTagæ˜¯å¦æ¸…æ™°å¯è§
3. è°ƒæ•´`--tag-family`å‚æ•°

### å¦‚æœé‡æŠ•å½±è¯¯å·®ä»ç„¶å¾ˆé«˜
1. æ£€æŸ¥ç›¸æœºæ ‡å®šè´¨é‡
2. è°ƒæ•´`--max-error`é˜ˆå€¼
3. ç¡®ä¿æ ‡å®šæ¿æ£€æµ‹è´¨é‡è‰¯å¥½

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | åŸç³»ç»Ÿ | é²æ£’ç³»ç»Ÿ | æ”¹è¿› |
|------|--------|----------|------|
| å¹³å‡è¯¯å·® | 93.98px | <10px | 95.5% â†“ |
| æœ€å¤§è¯¯å·® | 247.80px | <20px | 92% â†“ |
| é«˜è¯¯å·®å¸§ | 60% | 0% | 100% â†“ |

ğŸ‰ **æˆåŠŸè§£å†³247åƒç´ é‡æŠ•å½±è¯¯å·®é—®é¢˜ï¼**